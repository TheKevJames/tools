// TODO: consider adding `minimumReleaseAge` to some or all of these,
// especially packages with frequent patches
{
    "automerge": false,
    "automergeType": "pr",
    "ignoreTests": false,
    "ignoreUnstable": true,
    "lockFileMaintenance": {
        "automerge": true
    },
    "packageRules": [
        // Automerge minor bumps when they are non-breaking (eg. v1 or greater for semver)
        {
            "matchUpdateTypes": ["minor"],
            "matchJsonata": ["isBreaking != true"],
            "automerge": true,
        },
        // Automerge patch and lesser bumps
        {
            "matchUpdateTypes": ["patch", "pin", "digest"],
            "automerge": true,
        },
        // Automerge non-breaking minor actions bumps and also pin digests
        {
            "matchDepTypes": ["action"],
            "matchUpdateTypes": ["minor"],
            "matchJsonata": ["isBreaking != true"],
            "pinDigests": true,
            "automerge": true,
        },
        // Automerge majors of gcloud CLI
        {
            "matchDatasources": ["docker"],
            "matchPackagePatterns": [
                "^gcr.io/google.com/cloudsdktool/google-cloud-cli$",
                "^google/cloud-sdk$",
                "^quay.io/thekevjames/gcloud-pubsub-emulator$",
                "^thekevjames/gcloud-pubsub-emulator$",
            ],
            "matchUpdateTypes": ["major", "minor", "patch"],
            "automerge": true,
        },
        // Never automerge docker images using calver
        {
            "matchDatasources": ["docker"],
            "matchDepNames": [
                "docker.io/cloudflare/cloudflared",
            ],
            "automerge": false,
        },
        // Never automerge pypi packages using calver
        {
            "matchDatasources": ["pypi"],
            "matchDepNames": [
                "openai-whisper",
            ],
            "automerge": false,
        },
        // Slow down automerge for packages with rapid release schedules
        // TODO: consider selective scheduling instead
        // https://docs.renovatebot.com/noise-reduction/#selective-scheduling
        {
            "matchDepNames": [
                "hypothesis",
            ],
            "minimumReleaseAge": "3 days",
        },
    ],
}
